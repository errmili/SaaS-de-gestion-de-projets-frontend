<mat-card class="table-card">
  <table mat-table [dataSource]="projectStats" class="stats-table">

    <!-- Project Column -->
    <ng-container matColumnDef="project">
      <th mat-header-cell *matHeaderCellDef>Project</th>
      <td mat-cell *matCellDef="let stat">
        <div class="project-cell">
          <strong>{{ stat.project.name }}</strong>
          <span class="project-key">{{ stat.project.key }}</span>
        </div>
      </td>
    </ng-container>

    <!-- Total Column -->
    <ng-container matColumnDef="total">
      <th mat-header-cell *matHeaderCellDef>Total</th>
      <td mat-cell *matCellDef="let stat">{{ stat.totalTasks }}</td>
    </ng-container>

    <!-- To Do Column -->
    <ng-container matColumnDef="todo">
      <th mat-header-cell *matHeaderCellDef>To Do</th>
      <td mat-cell *matCellDef="let stat">
        <mat-chip class="status-chip todo">{{ stat.todoTasks }}</mat-chip>
      </td>
    </ng-container>

    <!-- In Progress Column -->
    <ng-container matColumnDef="inProgress">
      <th mat-header-cell *matHeaderCellDef>In Progress</th>
      <td mat-cell *matCellDef="let stat">
        <mat-chip class="status-chip in-progress">{{ stat.inProgressTasks }}</mat-chip>
      </td>
    </ng-container>

    <!-- Done Column -->
    <ng-container matColumnDef="done">
      <th mat-header-cell *matHeaderCellDef>Done</th>
      <td mat-cell *matCellDef="let stat">
        <mat-chip class="status-chip done">{{ stat.doneTasks }}</mat-chip>
      </td>
    </ng-container>

    <!-- Completion Column -->
    <ng-container matColumnDef="completion">
      <th mat-header-cell *matHeaderCellDef>Completion</th>
      <td mat-cell *matCellDef="let stat">
        <div class="completion-cell">
          <span class="completion-value">{{ stat.completionRate }}%</span>
          <mat-progress-bar
            mode="determinate"
            [value]="stat.completionRate"
            [color]="getProgressBarColor(stat.completionRate)">
          </mat-progress-bar>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>

  <div *ngIf="projectStats.length === 0" class="empty-table">
    <mat-icon>folder_open</mat-icon>
    <p>No project data available</p>
  </div>
</mat-card>
